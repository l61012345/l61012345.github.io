---
title: 06.图像处理
category_bar: true
date: 2022/12/20
categories: 
- 学习笔记
- 智能系统和数字图像处理应用
---
# 图像处理
图像处理的本质是对图像矩阵进行一些数学操作，图像处理主要有两大类技术：点处理(point processin)和相邻处理(neighborhood processing)，此外还有直方图均衡和边缘检测等操作。  

## 点处理
点处理是像素点到点的变换，其影响仅限于单个的像素。图像上一个像素值$r(x,y)$,经过处理$s(x,y)=T(r(x,y))$后，得到同一位置的像素$s(x,y)$。    
注意：
1. $(x,y)$表示坐标。
2. 不同的图像处理库坐标系统的原点设置不同，$y$的取值设定也不同。  
3. $T$只能是单调（通常是单调递增）的函数。

点处理的几个特性：  
- 点处理的影响仅限于单个的像素点。  
- 点处理不会改变像素的位置。

### 常见的点处理变换
#### 阈值变换
阈值变换(thresholding)可以表示为：   
$$s=\begin{cases}
    0, r≤k\\
    255,r>k
\end{cases}$$
其中$k$点称为阈值，高于阈值的像素将会被强化为近黑色/黑色的像素值，低于阈值的像素值将被弱化为近白色/白色的像素值。  

阈值函数可分为两种：软阈值函数（左图）和硬阈值函数/二值化函数(Hard thresholding/Binarization，右图)，它们的作用都是将像素转换成黑白像素。   
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220144058.png width=50%>  


#### 对数变换  
对数变换的表达式为：  
$$s=clog(1+r)$$
对数变换能够扩展低灰度值（突出过曝区域的细节）而压缩高灰度值（突出过暗区域的细节），从而增强图像的清晰度。   
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220144427.png width=50%>  

#### 幂变换
幂变换的表达式为：
$$s=cr^γ$$
其中$γ$是幂指数。  

<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220144825.png width=50%>   

幂变换用于调整图像整体的明暗关系。当$0<γ<1$时，图像整体的暗部被加强；$γ>1$时，图像整体的亮部被加强。  
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220145050.png width=50%>  

幂变换又被称为伽马变换。显示器中的伽玛校正(Gamma Correction)即得名于此，可以调整该值使得显示器整体偏亮或偏暗。 当$0<γ<1$时，显示器偏暗，$γ<1$时，显示器偏亮。  
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220145307.png width=50%>  

#### 反转
反转(inverse)的表达式为：  
$$s=L-1-r$$
$L$表示最大的像素值。  
反转的作用是作用是将像素值进行颠倒：白色变为黑色，黑色变为白色。    
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220144228.png width=50%>  

反转后的图像可以使用上述式子再对图像进行复原，复原后的图像将和原图完全一样。反转处理不会破坏图像信息。  

#### 线性分段处理
线性分段处理(linear piecewise)可以分区域对不同的灰度区域实现不同的映射，进而选择性地增强图像的细节。如下图例子中只有处于中等灰度值的像素被加强。  
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220150404.png width=50%>  

局部增强可以选择在增强目标灰度区域的同时减弱其他灰度区域的像素值，也可以选择让其他灰度区域的像素值保持不变。  
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220150612.png width=50%>   

## 相邻处理（Neighborhood Processing）  
与点处理比较，虽然相邻处理的输入值仍然是一个像素值，但是输出值确实一个围绕输入像素值的像素集。（如下图所示）  
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220151132.png width=30%>   
滤波（Filtering） 是一种应用于相邻处理的常见方法。  
设以某个像素为中心的像素方阵称为**核矩阵**(Kernel/Mask matrix),以$W$记，核矩阵中的每一个像素值以$w(u,v)$表示。 将核矩阵照射至图像的某一区域$r$，使被照射区域中的像素值与对应的核矩阵中同位置的像素值一一相乘后全部相加，最后用一常数$C$调整，该过程被称为滤波。    
$$s(x,y)=C∑_{(u,v)∈W}w(u,v)r(x+u,y+v)$$  
整个过程可以用下图来表示：  
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220153317.png width=50%>  

一次滤波结束后，核矩阵平移$α$个像素单位（称为**步长**(Padding)），照射图像的另一个区域，重复上述过程。    



### 均值滤波   
均值滤波的核矩阵如下：   
$$\frac{1}{n}×\begin{bmatrix} 1&1&...&1\\...&...&...&...\\ 1&1&...&1 \\ 1&1&...&1\end{bmatrix}$$  
其中$n$表示方阵元素的数量。  
这样最终的输出结果是取像素点周围领域的平均值作为响应输出。在图像的边界，两个像素值差距较大的像素都被它们的平均值所代替，那么边界也不再清晰，因此最终的图像是模糊的。  
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220152751.png width=50%>  

下面从数学角度分析均值滤波的合理性：对于一个核矩阵照射到的区域，倘若用一个数$a$替代将这个区域内的像素值，设新图与原图的均方差表示为：  
$$MSE=∑_{i}(a-r_i)^2$$
其中$r_i$表示对应位置上的像素值。
**当$a$为这些像素值的均值时，此时有均方差最小**。  

### 中值滤波



椒盐噪声(salt-pepper noise)是一种将图像上的某些像素点随机地替换为另一些固定的、且较大或者较小的像素值制造的噪声。中值滤波特别适合用于处理椒盐噪声，这是因为椒盐噪声往往是由一些极大或极小的像素值组成的，在中值滤波中这些像素值一般不会被选中作为中值。  
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220153348.png width=50%>  
▲上面的三张图依次是：原图（有椒盐噪声），进行均值滤波和中值滤波的输出。  


### 高斯滤波   
高斯滤波(Gaussian Filtering)的核矩阵内的元素在三维上符合标准高斯/标准正态分布，且最高点在核矩阵中心处，如下图所示。  
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220152851.png width=50%>    
其具体的计算公式为：  
$$G(x,y)=\frac{1}{2πσ^2}e^{-\frac{x^2+y^2}{2σ^2}}$$  
$σ$是标准高斯分布中的方差，$σ$较小时，图像的峰值窄且高。  
例如当$σ=1.4$时，其核矩阵可以取：   
$$\frac{1}{115}\begin{bmatrix}
    2&4&5&4&2\\
    4&9&12&9&4\\
    5&12&15&12&5\\
    4&9&12&9&4\\
    2&4&5&4&2\\
\end{bmatrix}$$
    
高斯滤波的作用是将图像模糊，使图像呈现一种毛玻璃的质感。运用高斯滤波处理图像的方法又被称为**高斯模糊**(Gaussian Blurring)。   
<img src= https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20221220153141.png width=50%>    
**高斯模糊的重要作用是将图像中的噪点通过模糊化图像的方法移除。**