---
title: 2. 对象工程
date: 2023/12/4
category_bar: true
categories: 
- 学习笔记
- 面向对象设计C++
---
# 对象工程
## 自动售票机
对自动售票机而言，如果是面向过程的描述，那么应当是：  
- Step to the machine
- Insert money into the machine
- The machine prints a ticket
- Take the ticket and leave  
如果是面向对象的描述，那么：  
自动售票机具有价格、余额、收入总额这三个数据。  
自动售票机会显示提示信息、打印余额、打印车票、接收纸币。  
<img src = https://cdn.jsdelivr.net/gh/l61012345/Pic/img/20231204204324.png width=50%>    
那么可以说自动售票机就是一个类，这个类可以表示为：  
```cpp
class TicketMachine{
    public:
    void showPrompt();
    void getMoney(float money);
    void printTicket();
    void showBalance();
    void printTotal();

    private:
    const float PRICE;
    float Balance;
    float total;
};

```
在Eclipse中，创建一个类中，每一个类都需要有两个源代码文件，一个是`*.h`，另一个是`*.cpp`。  
对上面的自动售票机的例子，`*.h`中的写法如下：  

```cpp
#ifndef TICKTMACHINE_H_
#define TICKTMACHINE_H_

class TichetMachine{
    public:
        TichtMachine(); //构造函数
        virtual ~TicketMachine();//析构函数
        void showPrompt();
        void getMoney(float money);
        void printTicket();
        void showBalance();
        void printTotal();
        // 从C语言的角度看，这些是函数原型，只是告诉了类具有哪些函数，但是函数具体的写法不知道。  
    private:
        const float PRICE;
        float Balance;
        float total;
};
```
在`*.cpp`文件中，有这样一个函数：  
```cpp

#include "TicketMachine.h" //TicketMachine这个类是在文件"TicketMachine.h"中声明的
#include <iostream>
using namespace std;

// 在.cpp文件中所要描述的实体定义.h文件中所声明的
TicketMachine::TicketMachine() : PRICE(0) {
    //PRICE(0)是为了初始化指针PRICE为0
    // TODO Auto-generated constructor stub
}
TicketMachine::~TicketMachine(){
    // TODO Auto-generated destructor stub
}

void TicketMachine::showPrompt()
{
    cout << "something";
}

void TicketMachine::insertMoney(float money)
{
    balcance += money;
}

void TicketMachine::showBalance()
{
    cout << balance;
}
```

习惯上再去创建一个新的源文件进行启动，此处创建一个源文件`main.cpp`，在这个文件中：  
```cpp
#include "ticketmachine.h";

int main()
{
    TickMachine tm;
    tm.insertMoney(100);
    tm.showBalance();
    return 0;
}
```

这一大段程序中，`::`称为解析符(resolver).用法为：  
`<ClassName>::<function_name>`或者`::<function_name>`
解析符的作用是为了表示这个函数是专门依附于解析符前的类而存在的。如果解析符前面没有类，则代表该函数是一个全局的函数。  
比如:  
```cpp
void S::f() {
    ::f(); // Would be recursive otherwise 可以自己递归调用自己
    ::a++; // Select the global a 引用全局变量a
    a--; // The a at class scope 用这个类S中的一个成员变量a
}
```